{"version":3,"sources":["../../src/controllers/post.js"],"names":["more","req","res","next","find","exec","then","json","postsList","posts","catch","one","id","params","findOne","_id","post","create","body","title","content","authorId","locals","currentUser","save","doc","update","findOneAndUpdate","end"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEO,IAAMA,sBAAO,SAAPA,IAAO,CAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC5C,iBAAUC,IAAV,CAAe,EAAf,EAAmB,EAAnB,EAAuBC,IAAvB,GACGC,IADH,CACQ,iBAAS;AACbJ,QAAIK,IAAJ,CAAS,EAAEC,WAAWC,KAAb,EAAT;AACD,GAHH,EAIGC,KAJH,CAISP,IAJT;AAKD,CANM;;AAQA,IAAMQ,oBAAM,SAANA,GAAM,CAAUV,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC3C,MAAMS,KAAKX,IAAIY,MAAJ,CAAWD,EAAtB;;AAEA,iBAAUE,OAAV,CAAkB,EAAEC,KAAKH,EAAP,EAAlB,EAA+BP,IAA/B,GACGC,IADH,CACQ,gBAAQ;AACZJ,QAAIK,IAAJ,CAAS,EAAES,UAAF,EAAT;AACD,GAHH,EAIGN,KAJH,CAISP,IAJT;AAKD,CARM;;AAUA,IAAMc,0BAAS,SAATA,MAAS,CAAUhB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,kBACnBF,IAAIiB,IADe;AAAA,MACtCC,KADsC,aACtCA,KADsC;AAAA,MAC/BC,OAD+B,aAC/BA,OAD+B;;;AAG9C,MAAMJ,OAAO,oBAAb;AACAA,OAAKG,KAAL,GAAaA,KAAb;AACAH,OAAKI,OAAL,GAAeA,OAAf;AACAJ,OAAKK,QAAL,GAAgBnB,IAAIoB,MAAJ,CAAWC,WAAX,CAAuBR,GAAvC;AACAC,OAAKQ,IAAL,GACGlB,IADH,CACQ,eAAO;AACXJ,QAAIK,IAAJ,CAAS,EAAES,MAAMS,GAAR,EAAT;AACD,GAHH,EAIGf,KAJH,CAISP,IAJT;AAKD,CAZM;;AAcA,IAAMuB,0BAAS,SAATA,MAAS,CAAUzB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,oBACfF,IAAIY,MADW;AAAA,MACtCD,EADsC,eACtCA,EADsC;AAAA,MAClCO,KADkC,eAClCA,KADkC;AAAA,MAC3BC,OAD2B,eAC3BA,OAD2B;;;AAG9C,iBAAUO,gBAAV,CAA2B,EAAEZ,KAAKH,EAAP,EAA3B,EAAwC,EAAEO,YAAF,EAASC,gBAAT,EAAxC,EAA2Df,IAA3D,GACGC,IADH,CACQ,YAAM;AACVJ,QAAI0B,GAAJ;AACD,GAHH,EAIGlB,KAJH,CAISP,IAJT;AAKD,CARM","file":"post.js","sourcesContent":["import PostModel from '../models/post'\r\nimport UserModel from '../models/user'\r\nimport config from '../config'\r\n\r\nexport const more = function (req, res, next) {\r\n  PostModel.find({}, {}).exec()\r\n    .then(posts => {\r\n      res.json({ postsList: posts })\r\n    })\r\n    .catch(next)\r\n}\r\n\r\nexport const one = function (req, res, next) {\r\n  const id = req.params.id\r\n\r\n  PostModel.findOne({ _id: id }).exec()\r\n    .then(post => {\r\n      res.json({ post})\r\n    })\r\n    .catch(next)\r\n}\r\n\r\nexport const create = function (req, res, next) {\r\n  const { title, content } = req.body\r\n\r\n  const post = new PostModel()\r\n  post.title = title\r\n  post.content = content\r\n  post.authorId = res.locals.currentUser._id\r\n  post.save()\r\n    .then(doc => {\r\n      res.json({ post: doc })\r\n    })\r\n    .catch(next)\r\n}\r\n\r\nexport const update = function (req, res, next) {\r\n  const { id, title, content } = req.params\r\n\r\n  PostModel.findOneAndUpdate({ _id: id }, { title, content}).exec()\r\n    .then(() => {\r\n      res.end()\r\n    })\r\n    .catch(next)\r\n}\r\n"]}